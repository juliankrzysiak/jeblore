---
import ComicLayout from 'src/layouts/ComicLayout.astro';
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const comics = (await getCollection('comics')).sort((a, b) => {
	const aDateString = a.data.date.toLocaleDateString();
	const bDateString = b.data.date.toLocaleDateString();

	if (aDateString < bDateString) return 1;
	if (aDateString > bDateString) return -1;
	else return 0;
});
if (!comics) throw new Error('No comic found');

const { title, image, imageAlt, date } = comics.at(-1).data;
const previous = `comics/${comics.at(-2)?.id}`;
---

<Layout title={title}>
	<ComicLayout
		title={title}
		image={image}
		alt={imageAlt}
		date={date}
		previous={previous}
	/>
</Layout>

<style></style>
